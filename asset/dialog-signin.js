let ipcRenderer=require("electron")["ipcRenderer"],querystring=require("querystring"),seq=0;async function sendIPCRequest(n,r={}){return new Promise((o,i)=>{var e=`ipc-api-reply:${n}:`+seq;ipcRenderer.once(e,(e,{error:n,data:r})=>{n?i(n):o(r)}),ipcRenderer.send("ipc-api:"+n,{payload:r,seq:seq}),seq++})}let log={info:function(e,...n){e={moduleName:"hook-Dialog",timestamp:(new Date).toISOString(),level:"info",message:"[92m"+e,args:n};ipcRenderer.send("logger:handleLogEvent",e)},error:function(e,...n){n={moduleName:"hook-Dialog",timestamp:(new Date).toISOString(),level:"error",message:msg,args:n};ipcRenderer.send("logger:handleLogEvent",n)}};(async()=>{var e=(e=>{e=e.startsWith("?")?e.slice(1):e;return querystring.parse(e)})(window.location.search);try{var n=await sendIPCRequest("POST /xos/devices"),r=(log.info("Bind device result:",n),"æœ¬æœºç”¨æˆ·:"+n.license?.device_name),o=n.license?.status,i={region:"cn",user:r,token:"fuckAlibaba",uid:"fuckTencent",primaryEmail:r,fullname:r,groupName:"",phone:"13000000000"},a=(log.info("User Info:",i),{...i,rawSubscriptionData:n.rawData});await sendIPCRequest("POST /pinia/store/mutations",{mutations:[{id:"account",type:"updateAccount",payload:[a]}]}),log.info("updateAccount success"),setTimeout(()=>{window&&window.close()},0),e.ignoreOpenDialog||(e.openBy?await sendIPCRequest("POST /windows",{name:e.openBy}):o&&await sendIPCRequest("POST /windows",{name:"dialog-congratulate"}))}catch(e){log.error("An error occurred in  singnin ",e)}})(),module.exports={log:log,sendIPCRequest:sendIPCRequest};